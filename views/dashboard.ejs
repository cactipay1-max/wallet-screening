<h1>Dashboard</h1>

<div class="card">
  <h2>Screen a Wallet</h2>
  <% if (error) { %>
    <div class="error"><%= error %></div>
  <% } %>
  <form method="POST" action="/wallets">
    <div class="form-row">
      <div class="form-group">
        <label>Address</label>
        <input
          type="text"
          name="address"
          class="wide"
          placeholder="0x..."
          required
          autocomplete="off"
          spellcheck="false"
          value="<%= typeof formAddress !== 'undefined' ? formAddress : '' %>"
        />
      </div>
      <div class="form-group">
        <label>Chain</label>
        <select name="chain">
          <option value="ethereum" <%= (typeof formChain !== 'undefined' && formChain === 'ethereum') || typeof formChain === 'undefined' ? 'selected' : '' %>>Ethereum</option>
          <option value="bsc"      <%= typeof formChain !== 'undefined' && formChain === 'bsc'      ? 'selected' : '' %>>BSC</option>
          <option value="polygon"  <%= typeof formChain !== 'undefined' && formChain === 'polygon'  ? 'selected' : '' %>>Polygon</option>
        </select>
      </div>
      <div class="form-group">
        <label>&nbsp;</label>
        <button type="submit">Screen</button>
      </div>
    </div>
  </form>
</div>

<div class="card">
  <h2>Wallets</h2>
  <% if (wallets.length === 0) { %>
    <p class="empty">No wallets screened yet.</p>
  <% } else { %>
    <table>
      <thead>
        <tr>
          <th>Address</th>
          <th>Chain</th>
          <th>Status</th>
          <th>Last Checked</th>
        </tr>
      </thead>
      <tbody>
        <% wallets.forEach(w => { %>
        <tr>
          <td class="mono">
            <a href="/wallets/<%= w.id %>"><%= w.address %></a>
          </td>
          <td><%= w.chain %></td>
          <td>
            <span class="badge badge-<%= w.status %>"><%= w.status %></span>
          </td>
          <td class="meta">
            <%= w.last_checked_at
                ? new Date(w.last_checked_at).toLocaleString()
                : 'â€”' %>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
  <% } %>
</div>
